# بک‌اند پروژه Ambridge

سیستم بک‌اند برای پلتفرم Ambridge، سرویسی که به استارت‌آپ‌ها در زمینه راه‌حل‌های توسعه کمک می‌کند.

## ویژگی‌ها

- احراز هویت مبتنی بر JWT
- ثبت‌نام کاربر
- قابلیت ورود/خروج
- کنترل دسترسی مبتنی بر نقش (مدیر، کاربران عادی)
- مدیریت پروفایل کاربر

## نقاط پایانی API

### احراز هویت
- `POST /api/auth/register` - ثبت‌نام کاربر جدید
- `POST /api/auth/login` - ورود کاربر
- `POST /api/auth/logout` - خروج کاربر (نیاز به احراز هویت)
- `POST /api/auth/refresh-token` - تازه‌سازی توکن JWT

برای مستندات دقیق API با نمونه‌های درخواست/پاسخ، به [مستندات API](docs/api.md) مراجعه کنید.

## راه‌اندازی

1. مخزن را کلون کنید
2. اسکریپت راه‌اندازی را اجرا کنید:

```bash
# اسکریپت را قابل اجرا کنید
chmod +x init.sh

# اسکریپت راه‌اندازی را اجرا کنید
./init.sh
```

3. فایل `.env` را با تنظیمات خود به‌روز کنید
4. سرور را اجرا کنید:

```bash
# با استفاده از Makefile
make run

# یا مستقیماً با Go
go run cmd/server/main.go

# یا ساخت و اجرای باینری
make build
./bin/server
```

## پایگاه داده

این پروژه از MySQL با ORM GORM برای عملیات پایگاه داده استفاده می‌کند. طرح پایگاه داده به صورت خودکار در هنگام راه‌اندازی سرور مهاجرت می‌شود.

## متغیرهای محیطی

- `MYSQL_HOST` - هاست پایگاه داده
- `MYSQL_PORT` - پورت پایگاه داده
- `MYSQL_USER` - کاربر پایگاه داده
- `MYSQL_PASSWORD` - رمز عبور پایگاه داده
- `MYSQL_DATABASE` - نام پایگاه داده
- `JWT_SECRET` - کلید مخفی برای توکن‌های JWT
- `JWT_EXPIRATION` - مدت زمان اعتبار توکن JWT (ساعت)
- `SERVER_PORT` - پورت سرور

## ساختار پروژه

```
ambridge-backend/
├── cmd/
│   └── server/
│       └── main.go       # نقطه ورود اصلی برنامه
├── controllers/
│   └── auth.go           # کنترلرهای احراز هویت
├── database/
│   └── mysql.go          # اتصال به پایگاه داده و مهاجرت‌ها
├── docs/
│   └── api.md            # مستندات API
├── middleware/
│   └── auth.go           # میدل‌ور‌های احراز هویت
├── models/
│   └── user.go           # مدل کاربر
├── routes/
│   └── auth.go           # مسیرهای API
├── utils/
│   └── auth.go           # توابع کمکی احراز هویت
├── config/
│   └── env.go            # تنظیمات محیطی
├── env.sample            # نمونه فایل متغیرهای محیطی
├── go.mod                # وابستگی‌های Go
├── Makefile              # دستورات ساخت و اجرا
└── README.md             # مستندات پروژه
```